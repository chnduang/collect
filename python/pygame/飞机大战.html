<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Python-Pygame实现飞机大战 | duangdong的collect</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/logo.png">
    <link rel="manifest" href="/manifest.json">
    <script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?0088ce24040b03f2947322ab31d23414";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
  </script>
    <script>
  var _hmt = _hmt || [];
  _hmt.push(['_requirePlugin', 'UrlChangeTracker', {
    shouldTrackUrlChange: function (newPath, oldPath) {
      newPath = newPath.split('#')[0];
      oldPath = oldPath.split('#')[0];
      return newPath != oldPath;
    }}
  ]);
  </script>
    <meta name="description" content="前端工程相关知识归纳总结">
    <meta name="keywords" content="qd-blog,vuepress,deploy,algorithm">
    
    <link rel="preload" href="/assets/css/0.styles.79da9109.css" as="style"><link rel="preload" href="/assets/js/app.6de842d1.js" as="script"><link rel="preload" href="/assets/js/2.57da4f88.js" as="script"><link rel="preload" href="/assets/js/1.a76cc220.js" as="script"><link rel="preload" href="/assets/js/63.2f626ca9.js" as="script"><link rel="prefetch" href="/assets/js/10.50f73657.js"><link rel="prefetch" href="/assets/js/11.0390ceee.js"><link rel="prefetch" href="/assets/js/12.f88bec36.js"><link rel="prefetch" href="/assets/js/13.963ad03b.js"><link rel="prefetch" href="/assets/js/14.512f15b9.js"><link rel="prefetch" href="/assets/js/15.a674496c.js"><link rel="prefetch" href="/assets/js/16.ed7e507f.js"><link rel="prefetch" href="/assets/js/17.de667ca5.js"><link rel="prefetch" href="/assets/js/18.b44e84af.js"><link rel="prefetch" href="/assets/js/19.5b5ad6a1.js"><link rel="prefetch" href="/assets/js/20.6800493a.js"><link rel="prefetch" href="/assets/js/21.6589052c.js"><link rel="prefetch" href="/assets/js/22.f648d829.js"><link rel="prefetch" href="/assets/js/23.08b4924b.js"><link rel="prefetch" href="/assets/js/24.04e013f6.js"><link rel="prefetch" href="/assets/js/25.34294968.js"><link rel="prefetch" href="/assets/js/26.6cd6a2b2.js"><link rel="prefetch" href="/assets/js/27.292ba016.js"><link rel="prefetch" href="/assets/js/28.ad4889fd.js"><link rel="prefetch" href="/assets/js/29.40ddd368.js"><link rel="prefetch" href="/assets/js/3.13e892f5.js"><link rel="prefetch" href="/assets/js/30.4da9018d.js"><link rel="prefetch" href="/assets/js/31.94fcf72e.js"><link rel="prefetch" href="/assets/js/32.dd9a5c57.js"><link rel="prefetch" href="/assets/js/33.0e840cdc.js"><link rel="prefetch" href="/assets/js/34.22f6d84d.js"><link rel="prefetch" href="/assets/js/35.6c71aa30.js"><link rel="prefetch" href="/assets/js/36.fa16a4ae.js"><link rel="prefetch" href="/assets/js/37.742545d4.js"><link rel="prefetch" href="/assets/js/38.7edf2e2f.js"><link rel="prefetch" href="/assets/js/39.52168953.js"><link rel="prefetch" href="/assets/js/4.5bdb9365.js"><link rel="prefetch" href="/assets/js/40.28420c4f.js"><link rel="prefetch" href="/assets/js/41.19d54d72.js"><link rel="prefetch" href="/assets/js/42.05502384.js"><link rel="prefetch" href="/assets/js/43.014a7ae4.js"><link rel="prefetch" href="/assets/js/44.803bf2b3.js"><link rel="prefetch" href="/assets/js/45.a60e397e.js"><link rel="prefetch" href="/assets/js/46.a1ec0ebe.js"><link rel="prefetch" href="/assets/js/47.1e484153.js"><link rel="prefetch" href="/assets/js/48.6bf4d9f5.js"><link rel="prefetch" href="/assets/js/49.dc6882bc.js"><link rel="prefetch" href="/assets/js/5.7c68fdb5.js"><link rel="prefetch" href="/assets/js/50.91a545d9.js"><link rel="prefetch" href="/assets/js/51.5430a2bc.js"><link rel="prefetch" href="/assets/js/52.91d30b41.js"><link rel="prefetch" href="/assets/js/53.b114bb42.js"><link rel="prefetch" href="/assets/js/54.eba50797.js"><link rel="prefetch" href="/assets/js/55.0607fa87.js"><link rel="prefetch" href="/assets/js/56.a884aff5.js"><link rel="prefetch" href="/assets/js/57.789241af.js"><link rel="prefetch" href="/assets/js/58.df4d4f84.js"><link rel="prefetch" href="/assets/js/59.db90050e.js"><link rel="prefetch" href="/assets/js/6.c8da7ca7.js"><link rel="prefetch" href="/assets/js/60.8d10377d.js"><link rel="prefetch" href="/assets/js/61.a900a46f.js"><link rel="prefetch" href="/assets/js/62.bd1f2c84.js"><link rel="prefetch" href="/assets/js/64.aab19556.js"><link rel="prefetch" href="/assets/js/65.3ede6ed7.js"><link rel="prefetch" href="/assets/js/66.5ccbf2d8.js"><link rel="prefetch" href="/assets/js/7.e4c88d0e.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.5143d2e0.js">
    <link rel="stylesheet" href="/assets/css/0.styles.79da9109.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">duangdong的collect</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/electron/" class="nav-link">
  Electron
</a></div><div class="nav-item"><a href="/python/" class="nav-link router-link-active">
  Python
</a></div><div class="nav-item"><a href="/java/" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/flutter/" class="nav-link">
  Flutter
</a></div><div class="nav-item"><a href="/android/" class="nav-link">
  部署
</a></div><div class="nav-item"><a href="/dataBase/" class="nav-link">
  数据库
</a></div><div class="nav-item"><a href="/git/" class="nav-link">
  Git
</a></div><div class="nav-item"><a href="https://link.aduang.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/electron/" class="nav-link">
  Electron
</a></div><div class="nav-item"><a href="/python/" class="nav-link router-link-active">
  Python
</a></div><div class="nav-item"><a href="/java/" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/flutter/" class="nav-link">
  Flutter
</a></div><div class="nav-item"><a href="/android/" class="nav-link">
  部署
</a></div><div class="nav-item"><a href="/dataBase/" class="nav-link">
  数据库
</a></div><div class="nav-item"><a href="/git/" class="nav-link">
  Git
</a></div><div class="nav-item"><a href="https://link.aduang.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/python/" aria-current="page" class="sidebar-link">Python</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>django</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>pip</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>pygame</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/python/pygame/pygame.html" class="sidebar-link">Pygame的使用</a></li><li><a href="/python/pygame/坦克大战.html" class="sidebar-link">Python-Pygame实现坦克大战</a></li><li><a href="/python/pygame/飞机大战.html" class="active sidebar-link">Python-Pygame实现飞机大战</a></li></ul></section></li><li><a href="/python/基本语法.html" class="sidebar-link">Python基本语法</a></li><li><a href="/python/安装.html" class="sidebar-link">安装</a></li><li><a href="/python/虚拟环境.html" class="sidebar-link">windows中python虚拟环境virtualenv使用命令行workon的操作错误</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="python-pygame实现飞机大战"><a href="#python-pygame实现飞机大战" class="header-anchor">#</a> Python-Pygame实现飞机大战</h2> <blockquote><p>和小甲鱼的飞机的大战很像，但是多一些功能的实现</p> <p>开发的环境是python3.5/pygame1.9.6</p></blockquote> <h4 id="效果图"><a href="#效果图" class="header-anchor">#</a> 效果图</h4> <img src="https://img-blog.csdnimg.cn/2019110823542815.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1pRRDY2Ng==,size_16,color_FFFFFF,t_70" style="zoom:75%;"> <h4 id="模块划分"><a href="#模块划分" class="header-anchor">#</a> 模块划分</h4> <ul><li>主机模块</li> <li>敌机模块</li> <li>子弹模块</li> <li>道具模块</li> <li>背景滚动模块</li></ul> <h5 id="主机模块"><a href="#主机模块" class="header-anchor">#</a> 主机模块</h5> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># user/bin/python</span>
<span class="token comment"># Author:ZQD</span>
<span class="token comment"># -*- coding: utf-8  -*-</span>
<span class="token keyword">import</span> pygame
<span class="token keyword">from</span> src<span class="token punctuation">.</span>buttle <span class="token keyword">import</span> Bullet1
SCREEN_RECT <span class="token operator">=</span> pygame<span class="token punctuation">.</span>Rect<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">480</span><span class="token punctuation">,</span> <span class="token number">652</span><span class="token punctuation">)</span>
<span class="token comment"># pygame.sprite.Sprite  加载动态效果</span>
<span class="token keyword">class</span> <span class="token class-name">OurPlane</span><span class="token punctuation">(</span>pygame<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>Sprite<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token string">&quot;玩家飞机：两张图片，上下左右功能，复位功能&quot;</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>bg_size<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span>OurPlane<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment">#确定玩家两张图片</span>
        self<span class="token punctuation">.</span>image_one<span class="token operator">=</span>pygame<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">&quot;../image/hero1.png&quot;</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>image_two <span class="token operator">=</span> pygame<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">&quot;../image/hero2.png&quot;</span><span class="token punctuation">)</span>
        <span class="token comment">#获取飞机的 位置</span>
        self<span class="token punctuation">.</span>rect<span class="token operator">=</span>self<span class="token punctuation">.</span>image_one<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment">#获取背景图片的宽高</span>
        self<span class="token punctuation">.</span>width<span class="token punctuation">,</span>self<span class="token punctuation">.</span>height<span class="token operator">=</span>bg_size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>bg_size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
        <span class="token comment">#获取飞机图片的掩膜，用来精确的碰撞检测</span>
        self<span class="token punctuation">.</span>mask<span class="token operator">=</span>pygame<span class="token punctuation">.</span>mask<span class="token punctuation">.</span>from_surface<span class="token punctuation">(</span>self<span class="token punctuation">.</span>image_one<span class="token punctuation">)</span>
        <span class="token comment">#获取飞机的初始位置</span>
        self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>left<span class="token punctuation">,</span>self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top<span class="token operator">=</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>width<span class="token operator">-</span>self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token operator">//</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>height<span class="token operator">-</span>self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>height<span class="token operator">-</span><span class="token number">60</span><span class="token punctuation">)</span>
        <span class="token comment">#移动速度</span>
        self<span class="token punctuation">.</span>speed<span class="token operator">=</span><span class="token number">10</span>
        <span class="token comment">#存活状态</span>
        self<span class="token punctuation">.</span>active<span class="token operator">=</span><span class="token boolean">True</span>
        <span class="token comment">#死亡状态，爆炸效果</span>
        self<span class="token punctuation">.</span>destroy_images<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
        self<span class="token punctuation">.</span>destroy_images<span class="token punctuation">.</span>extend<span class="token punctuation">(</span><span class="token punctuation">[</span>
            pygame<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">&quot;../image/hero_blowup_n1.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            pygame<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">&quot;../image/hero_blowup_n2.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            pygame<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">&quot;../image/hero_blowup_n3.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            pygame<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">&quot;../image/hero_blowup_n4.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token comment"># self.bullet1=Bullet1()</span>
    <span class="token comment"># def planeShoot(self):</span>
    <span class="token comment">#     self.bullet1.active=True</span>
    <span class="token keyword">def</span> <span class="token function">moveUp</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top<span class="token operator">-=</span>self<span class="token punctuation">.</span>speed
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top<span class="token operator">=</span><span class="token number">0</span>
    <span class="token keyword">def</span> <span class="token function">moveDown</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>bottom<span class="token operator">&lt;</span>self<span class="token punctuation">.</span>height<span class="token operator">-</span><span class="token number">30</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>bottom<span class="token operator">+=</span>self<span class="token punctuation">.</span>speed
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>bottom<span class="token operator">=</span>self<span class="token punctuation">.</span>height<span class="token operator">-</span><span class="token number">30</span>
    <span class="token keyword">def</span> <span class="token function">moveLeft</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>left<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>left<span class="token operator">-=</span>self<span class="token punctuation">.</span>speed
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>left<span class="token operator">=</span><span class="token number">0</span>
    <span class="token keyword">def</span> <span class="token function">moveRight</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>right<span class="token operator">&lt;</span>self<span class="token punctuation">.</span>width<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>right<span class="token operator">+=</span>self<span class="token punctuation">.</span>speed
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>right<span class="token operator">=</span>self<span class="token punctuation">.</span>width

    <span class="token keyword">def</span> <span class="token function">reset</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token string">&quot;位置重置的方法&quot;</span>
        self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>left<span class="token punctuation">,</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>width <span class="token operator">-</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>width<span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">,</span>\
                                        <span class="token punctuation">(</span>self<span class="token punctuation">.</span>height <span class="token operator">-</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>height <span class="token operator">-</span> <span class="token number">60</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>active<span class="token operator">=</span><span class="token boolean">True</span>
</code></pre></div><h5 id="敌机模块"><a href="#敌机模块" class="header-anchor">#</a> 敌机模块</h5> <blockquote><p>分为小型敌机和中型敌机</p></blockquote> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># user/bin/python</span>
<span class="token comment"># Author:ZQD</span>
<span class="token comment"># -*- coding: utf-8  -*-</span>
<span class="token keyword">import</span> pygame
<span class="token keyword">from</span> random <span class="token keyword">import</span> <span class="token operator">*</span>
<span class="token comment"># pygame.sprite.Sprite  加载动态效果</span>
<span class="token keyword">class</span> <span class="token class-name">OurEnemy</span><span class="token punctuation">(</span>pygame<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>Sprite<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token string">&quot;玩家飞机：两张图片，上下左右功能，复位功能&quot;</span>
    energy<span class="token operator">=</span><span class="token number">1</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>bg_size<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span>OurEnemy<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment">#确定玩家两张图片</span>
        self<span class="token punctuation">.</span>image<span class="token operator">=</span>pygame<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">&quot;../image/enemy1.png&quot;</span><span class="token punctuation">)</span>
        <span class="token comment">#获取飞机的 位置</span>
        self<span class="token punctuation">.</span>rect<span class="token operator">=</span>self<span class="token punctuation">.</span>image<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment">#获取背景图片的宽高</span>
        self<span class="token punctuation">.</span>width<span class="token punctuation">,</span>self<span class="token punctuation">.</span>height<span class="token operator">=</span>bg_size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>bg_size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
        <span class="token comment">#获取飞机图片的掩膜，用来精确的碰撞检测</span>
        self<span class="token punctuation">.</span>mask<span class="token operator">=</span>pygame<span class="token punctuation">.</span>mask<span class="token punctuation">.</span>from_surface<span class="token punctuation">(</span>self<span class="token punctuation">.</span>image<span class="token punctuation">)</span>
        <span class="token comment">#获取飞机的初始位置</span>
        self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>left<span class="token punctuation">,</span>self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top<span class="token operator">=</span><span class="token punctuation">(</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>self<span class="token punctuation">.</span>width<span class="token operator">-</span>self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">,</span>
                                      randint<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">5</span><span class="token operator">*</span>self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>height<span class="token punctuation">,</span><span class="token operator">-</span>self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">)</span>

        <span class="token comment">#移动速度</span>
        self<span class="token punctuation">.</span>speed<span class="token operator">=</span><span class="token number">2</span>
        <span class="token comment">#存活状态</span>
        self<span class="token punctuation">.</span>active<span class="token operator">=</span><span class="token boolean">True</span>
        self<span class="token punctuation">.</span>energy <span class="token operator">=</span> OurEnemy<span class="token punctuation">.</span>energy
        <span class="token comment">#死亡状态，爆炸效果</span>
        self<span class="token punctuation">.</span>destroy_images <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        self<span class="token punctuation">.</span>destroy_images<span class="token punctuation">.</span>extend<span class="token punctuation">(</span><span class="token punctuation">[</span>
            pygame<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">&quot;../image/enemy1_down1.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            pygame<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">&quot;../image/enemy1_down2.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            pygame<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">&quot;../image/enemy1_down3.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            pygame<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">&quot;../image/enemy1_down4.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">move</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top<span class="token operator">&lt;</span>self<span class="token punctuation">.</span>height<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top <span class="token operator">+=</span> self<span class="token punctuation">.</span>speed
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>reset<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">def</span> <span class="token function">reset</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>active<span class="token operator">=</span><span class="token boolean">True</span>
        self<span class="token punctuation">.</span>energy <span class="token operator">=</span> OurEnemy<span class="token punctuation">.</span>energy
        self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>left<span class="token punctuation">,</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token punctuation">(</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>width <span class="token operator">-</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">,</span>
                                         randint<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">5</span> <span class="token operator">*</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>height<span class="token punctuation">,</span> <span class="token operator">-</span>self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">Midenemy</span><span class="token punctuation">(</span>pygame<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>Sprite<span class="token punctuation">)</span><span class="token punctuation">:</span>
    energy <span class="token operator">=</span> <span class="token number">4</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> bg_size<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span>Midenemy<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment"># 确定玩家两张图片</span>
        self<span class="token punctuation">.</span>image <span class="token operator">=</span> pygame<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">&quot;../image/enemy2.png&quot;</span><span class="token punctuation">)</span>
        <span class="token comment"># 获取飞机的 位置</span>
        self<span class="token punctuation">.</span>rect <span class="token operator">=</span> self<span class="token punctuation">.</span>image<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment"># 获取背景图片的宽高</span>
        self<span class="token punctuation">.</span>width<span class="token punctuation">,</span> self<span class="token punctuation">.</span>height <span class="token operator">=</span> bg_size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> bg_size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
        <span class="token comment"># 获取飞机图片的掩膜，用来精确的碰撞检测</span>
        self<span class="token punctuation">.</span>mask <span class="token operator">=</span> pygame<span class="token punctuation">.</span>mask<span class="token punctuation">.</span>from_surface<span class="token punctuation">(</span>self<span class="token punctuation">.</span>image<span class="token punctuation">)</span>
        <span class="token comment"># 获取飞机的初始位置</span>
        self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>left<span class="token punctuation">,</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token punctuation">(</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>width <span class="token operator">-</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">,</span>
                                         randint<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">10</span> <span class="token operator">*</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>height<span class="token punctuation">,</span> <span class="token operator">-</span>self<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token comment"># 移动速度</span>
        self<span class="token punctuation">.</span>speed <span class="token operator">=</span> <span class="token number">1</span>
        <span class="token comment"># 存活状态</span>
        self<span class="token punctuation">.</span>active <span class="token operator">=</span> <span class="token boolean">True</span>
        self<span class="token punctuation">.</span>energy <span class="token operator">=</span> Midenemy<span class="token punctuation">.</span>energy
        <span class="token comment"># 死亡状态，爆炸效果</span>
        self<span class="token punctuation">.</span>destroy_images<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
        self<span class="token punctuation">.</span>destroy_images<span class="token punctuation">.</span>extend<span class="token punctuation">(</span><span class="token punctuation">[</span>
            pygame<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">&quot;../image/enemy2_down1.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            pygame<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">&quot;../image/enemy2_down2.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            pygame<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">&quot;../image/enemy2_down3.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            pygame<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">&quot;../image/enemy2_down4.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">move</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top <span class="token operator">&lt;</span> self<span class="token punctuation">.</span>height<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top <span class="token operator">+=</span> self<span class="token punctuation">.</span>speed
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>reset<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">reset</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>active <span class="token operator">=</span> <span class="token boolean">True</span>
        self<span class="token punctuation">.</span>energy <span class="token operator">=</span> OurEnemy<span class="token punctuation">.</span>energy
        self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>left<span class="token punctuation">,</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token punctuation">(</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>width <span class="token operator">-</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">,</span>randint<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">10</span> <span class="token operator">*</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>height<span class="token punctuation">,</span> <span class="token operator">-</span>self<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h5 id="子弹模块"><a href="#子弹模块" class="header-anchor">#</a> 子弹模块</h5> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># user/bin/python</span>
<span class="token comment"># Author:ZQD</span>
<span class="token comment"># -*- coding: utf-8  -*-</span>
<span class="token keyword">import</span> pygame

<span class="token comment">#英雄子弹</span>
<span class="token keyword">class</span> <span class="token class-name">Bullet1</span><span class="token punctuation">(</span>pygame<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>Sprite<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> position<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment">#引用精灵</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span>Bullet1<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>image <span class="token operator">=</span> pygame<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">&quot;../image/bullet1.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>convert_alpha<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>rect <span class="token operator">=</span> self<span class="token punctuation">.</span>image<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment">#坐标</span>
        self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>left<span class="token punctuation">,</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top <span class="token operator">=</span> position
        <span class="token comment">#运动速度</span>
        self<span class="token punctuation">.</span>speed <span class="token operator">=</span> <span class="token number">20</span>
        <span class="token comment">#按键盘触发active  true</span>
        self<span class="token punctuation">.</span>active <span class="token operator">=</span> <span class="token boolean">True</span>
        <span class="token comment">#获取掩模，检测碰撞</span>
        self<span class="token punctuation">.</span>mask <span class="token operator">=</span> pygame<span class="token punctuation">.</span>mask<span class="token punctuation">.</span>from_surface<span class="token punctuation">(</span>self<span class="token punctuation">.</span>image<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">move</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 判定子弹的消失</span>
        self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top <span class="token operator">-=</span> self<span class="token punctuation">.</span>speed
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>active <span class="token operator">=</span> <span class="token boolean">False</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top <span class="token operator">-=</span> self<span class="token punctuation">.</span>speed

    <span class="token keyword">def</span> <span class="token function">reset</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> position<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment">#重新，初始化定位</span>
        self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>left<span class="token punctuation">,</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top <span class="token operator">=</span> position
        self<span class="token punctuation">.</span>active <span class="token operator">=</span> <span class="token boolean">True</span>

<span class="token keyword">class</span> <span class="token class-name">Bullet2</span><span class="token punctuation">(</span>pygame<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>Sprite<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> position<span class="token punctuation">)</span><span class="token punctuation">:</span>
        pygame<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>Sprite<span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>self<span class="token punctuation">)</span>

        self<span class="token punctuation">.</span>image <span class="token operator">=</span> pygame<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">&quot;../image/bullet2.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>convert_alpha<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>rect <span class="token operator">=</span> self<span class="token punctuation">.</span>image<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>left<span class="token punctuation">,</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top <span class="token operator">=</span> position
        self<span class="token punctuation">.</span>speed <span class="token operator">=</span> <span class="token number">12</span>
        self<span class="token punctuation">.</span>active <span class="token operator">=</span> <span class="token boolean">False</span>
        self<span class="token punctuation">.</span>mask <span class="token operator">=</span> pygame<span class="token punctuation">.</span>mask<span class="token punctuation">.</span>from_surface<span class="token punctuation">(</span>self<span class="token punctuation">.</span>image<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">move</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top <span class="token operator">-=</span> self<span class="token punctuation">.</span>speed

        <span class="token keyword">if</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>active <span class="token operator">=</span> <span class="token boolean">False</span>

    <span class="token keyword">def</span> <span class="token function">reset</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> position<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>left<span class="token punctuation">,</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top <span class="token operator">=</span> position
        self<span class="token punctuation">.</span>active <span class="token operator">=</span> <span class="token boolean">True</span>

</code></pre></div><h5 id="道具模块"><a href="#道具模块" class="header-anchor">#</a> 道具模块</h5> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># user/bin/python</span>
<span class="token comment"># Author:ZQD</span>
<span class="token comment"># -*- coding: utf-8  -*-</span>
<span class="token keyword">import</span> pygame
<span class="token comment">#导入randint</span>
<span class="token keyword">from</span> random <span class="token keyword">import</span> randint

<span class="token comment">#子弹的道具</span>
<span class="token keyword">class</span> <span class="token class-name">Bullet_Tool</span><span class="token punctuation">(</span>pygame<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>Sprite<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> bg_size<span class="token punctuation">)</span><span class="token punctuation">:</span>
        pygame<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>Sprite<span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>self<span class="token punctuation">)</span>

        self<span class="token punctuation">.</span>image <span class="token operator">=</span> pygame<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">&quot;../image/ufo1.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>convert_alpha<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>rect <span class="token operator">=</span> self<span class="token punctuation">.</span>image<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>width<span class="token punctuation">,</span> self<span class="token punctuation">.</span>height <span class="token operator">=</span> bg_size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> bg_size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
        self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>left<span class="token punctuation">,</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top <span class="token operator">=</span><span class="token punctuation">(</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>width <span class="token operator">-</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>

        self<span class="token punctuation">.</span>speed <span class="token operator">=</span> <span class="token number">5</span>
        self<span class="token punctuation">.</span>active <span class="token operator">=</span> <span class="token boolean">False</span>
        self<span class="token punctuation">.</span>mask <span class="token operator">=</span> pygame<span class="token punctuation">.</span>mask<span class="token punctuation">.</span>from_surface<span class="token punctuation">(</span>self<span class="token punctuation">.</span>image<span class="token punctuation">)</span>
    <span class="token comment">#移动速度，下降速度</span>
    <span class="token keyword">def</span> <span class="token function">move</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top <span class="token operator">&lt;</span> self<span class="token punctuation">.</span>height<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top <span class="token operator">+=</span> self<span class="token punctuation">.</span>speed
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>active <span class="token operator">=</span> <span class="token boolean">False</span>
    <span class="token comment">#重置子弹道具位置</span>
    <span class="token keyword">def</span> <span class="token function">reset</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>active <span class="token operator">=</span> <span class="token boolean">True</span>
        self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>left<span class="token punctuation">,</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token punctuation">(</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>width <span class="token operator">-</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
</code></pre></div><h5 id="背景移动模块"><a href="#背景移动模块" class="header-anchor">#</a> 背景移动模块</h5> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># user/bin/python</span>
<span class="token comment"># Author:ZQD</span>
<span class="token comment"># -*- coding: utf-8  -*-</span>
<span class="token keyword">import</span> pygame
<span class="token keyword">class</span> <span class="token class-name">BackGround1</span><span class="token punctuation">(</span>pygame<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>Sprite<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> bg_size<span class="token punctuation">)</span><span class="token punctuation">:</span>
        pygame<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>Sprite<span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>self<span class="token punctuation">)</span>

        self<span class="token punctuation">.</span>image <span class="token operator">=</span> pygame<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">&quot;../image/background.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>convert_alpha<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>rect <span class="token operator">=</span> self<span class="token punctuation">.</span>image<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>width<span class="token punctuation">,</span> self<span class="token punctuation">.</span>height <span class="token operator">=</span> bg_size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> bg_size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
        self<span class="token punctuation">.</span>speed <span class="token operator">=</span> <span class="token number">1</span>
        self<span class="token punctuation">.</span>active <span class="token operator">=</span> <span class="token boolean">True</span>
        self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>center <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>width <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>height <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">move</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top <span class="token operator">&lt;</span> self<span class="token punctuation">.</span>height<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top <span class="token operator">+=</span> self<span class="token punctuation">.</span>speed
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>reset<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">reset</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>active <span class="token operator">=</span> <span class="token boolean">True</span>
        self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>center <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>width <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>height <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">BackGround2</span><span class="token punctuation">(</span>pygame<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>Sprite<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> bg_size<span class="token punctuation">)</span><span class="token punctuation">:</span>
        pygame<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>Sprite<span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>self<span class="token punctuation">)</span>

        self<span class="token punctuation">.</span>image <span class="token operator">=</span> pygame<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">&quot;../image/background.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>convert_alpha<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>rect <span class="token operator">=</span> self<span class="token punctuation">.</span>image<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>width<span class="token punctuation">,</span> self<span class="token punctuation">.</span>height <span class="token operator">=</span> bg_size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> bg_size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
        self<span class="token punctuation">.</span>speed <span class="token operator">=</span> <span class="token number">1</span>
        self<span class="token punctuation">.</span>active <span class="token operator">=</span> <span class="token boolean">True</span>
        self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>center <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>width <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>height <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">move</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top <span class="token operator">&lt;</span> self<span class="token punctuation">.</span>height<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top <span class="token operator">+=</span> self<span class="token punctuation">.</span>speed
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>reset<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">reset</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>active <span class="token operator">=</span> <span class="token boolean">True</span>
        self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>center <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>width <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>height <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h5 id="主模块"><a href="#主模块" class="header-anchor">#</a> 主模块</h5> <blockquote><p>程序的入口</p></blockquote> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># usr/bin/python</span>
<span class="token comment"># Author:ZQD</span>
<span class="token comment"># -*- coding: utf-8 -*-</span>
<span class="token triple-quoted-string string">'''
程序的入口，核心代码区域
主要实现窗体界面显示，各种精灵的加载，以及相应功能体现
'''</span>
<span class="token keyword">import</span> pygame<span class="token punctuation">,</span>sys
<span class="token keyword">import</span> random

<span class="token keyword">from</span> src<span class="token punctuation">.</span>plane <span class="token keyword">import</span> OurPlane
<span class="token keyword">from</span> src<span class="token punctuation">.</span>enemy1 <span class="token keyword">import</span> OurEnemy<span class="token punctuation">,</span>Midenemy
<span class="token keyword">from</span> src<span class="token punctuation">.</span>buttle <span class="token keyword">import</span> Bullet1<span class="token punctuation">,</span>Bullet2
<span class="token keyword">from</span> src<span class="token punctuation">.</span>tools <span class="token keyword">import</span> Bullet_Tool
<span class="token keyword">from</span> src<span class="token punctuation">.</span>bg  <span class="token keyword">import</span> BackGround1<span class="token punctuation">,</span>BackGround2
<span class="token triple-quoted-string string">''' 1、创建窗体显示，并添加背景图片'''</span>
<span class="token comment"># 1.1  创建窗体，并设置其相关属性</span>
bg_size <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">480</span><span class="token punctuation">,</span><span class="token number">652</span><span class="token punctuation">)</span><span class="token comment">#设置背景的大小</span>
screen <span class="token operator">=</span> pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>set_mode<span class="token punctuation">(</span>bg_size<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token comment">#创建窗体</span>
pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>set_caption<span class="token punctuation">(</span><span class="token string">&quot;飞机大战&quot;</span><span class="token punctuation">)</span><span class="token comment">#设置窗体标题</span>

<span class="token comment">#定义四种血槽颜色</span>
color_black <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
color_green <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
color_red <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
color_white <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span>
<span class="token comment">#初始化</span>
pygame<span class="token punctuation">.</span>mixer<span class="token punctuation">.</span>init<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># # 载入游戏音乐</span>
pygame<span class="token punctuation">.</span>mixer<span class="token punctuation">.</span>music<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">&quot;../sound/game_music.wav&quot;</span><span class="token punctuation">)</span>
pygame<span class="token punctuation">.</span>mixer<span class="token punctuation">.</span>music<span class="token punctuation">.</span>set_volume<span class="token punctuation">(</span><span class="token number">0.2</span><span class="token punctuation">)</span>
pygame<span class="token punctuation">.</span>mixer<span class="token punctuation">.</span>music<span class="token punctuation">.</span>play<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">#2.1创建玩家飞机对象</span>
ourplane <span class="token operator">=</span> OurPlane<span class="token punctuation">(</span>bg_size<span class="token punctuation">)</span>
<span class="token comment">#创建敌机方法</span>
<span class="token keyword">def</span> <span class="token function">add_enemys</span><span class="token punctuation">(</span>group1<span class="token punctuation">,</span>group2<span class="token punctuation">,</span>num<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span>  <span class="token builtin">range</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">:</span>
        small_enemy <span class="token operator">=</span> OurEnemy<span class="token punctuation">(</span>bg_size<span class="token punctuation">)</span>
        middle_enemy<span class="token operator">=</span>Midenemy<span class="token punctuation">(</span>bg_size<span class="token punctuation">)</span>
        group1<span class="token punctuation">.</span>add<span class="token punctuation">(</span>small_enemy<span class="token punctuation">)</span>
        group2<span class="token punctuation">.</span>add<span class="token punctuation">(</span>small_enemy<span class="token punctuation">)</span>
        group1<span class="token punctuation">.</span>add<span class="token punctuation">(</span>middle_enemy<span class="token punctuation">)</span>
        group2<span class="token punctuation">.</span>add<span class="token punctuation">(</span>middle_enemy<span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">add_background1</span><span class="token punctuation">(</span>group1<span class="token punctuation">,</span> group2<span class="token punctuation">,</span> num<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">:</span>
        bg1 <span class="token operator">=</span> BackGround1<span class="token punctuation">(</span>bg_size<span class="token punctuation">)</span>
        group1<span class="token punctuation">.</span>add<span class="token punctuation">(</span>bg1<span class="token punctuation">)</span>
        group2<span class="token punctuation">.</span>add<span class="token punctuation">(</span>bg1<span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">add_background2</span><span class="token punctuation">(</span>group1<span class="token punctuation">,</span> group2<span class="token punctuation">,</span> num<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">:</span>
        bg2 <span class="token operator">=</span> BackGround2<span class="token punctuation">(</span>bg_size<span class="token punctuation">)</span>
        group1<span class="token punctuation">.</span>add<span class="token punctuation">(</span>bg2<span class="token punctuation">)</span>
        group2<span class="token punctuation">.</span>add<span class="token punctuation">(</span>bg2<span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token string">&quot;核心代码封装在main方法中去，此main方法为自定义方法&quot;</span>
    <span class="token comment">#程序运行状态</span>

    running <span class="token operator">=</span> <span class="token boolean">True</span>
    <span class="token comment"># 2.3 图片切换的条件</span>
    switch_image <span class="token operator">=</span> <span class="token boolean">False</span>

    delay <span class="token operator">=</span> <span class="token number">60</span>

    enemies <span class="token operator">=</span> pygame<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>Group<span class="token punctuation">(</span><span class="token punctuation">)</span>
    small_enemies <span class="token operator">=</span> pygame<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>Group<span class="token punctuation">(</span><span class="token punctuation">)</span>
    middle_enemies <span class="token operator">=</span> pygame<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>Group<span class="token punctuation">(</span><span class="token punctuation">)</span>
    backgrounds <span class="token operator">=</span> pygame<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>Group<span class="token punctuation">(</span><span class="token punctuation">)</span>
    background1 <span class="token operator">=</span> pygame<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>Group<span class="token punctuation">(</span><span class="token punctuation">)</span>
    background2 <span class="token operator">=</span> pygame<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>Group<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">#添加敌机</span>
    add_enemys<span class="token punctuation">(</span>enemies<span class="token punctuation">,</span>small_enemies<span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span>
    add_enemys<span class="token punctuation">(</span>enemies<span class="token punctuation">,</span> middle_enemies<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
    <span class="token comment">#添加背景</span>
    add_background1<span class="token punctuation">(</span>backgrounds<span class="token punctuation">,</span>background1<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
    add_background2<span class="token punctuation">(</span>backgrounds<span class="token punctuation">,</span> background2<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token comment">#子弹列表</span>
    bullet1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    bullet1_index <span class="token operator">=</span> <span class="token number">0</span>
    el_destroy_index<span class="token operator">=</span><span class="token number">0</span>
    me_destroy_index<span class="token operator">=</span><span class="token number">0</span>
    BULLET1_NUM <span class="token operator">=</span> <span class="token number">10</span>
    <span class="token comment">#循环添加</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>BULLET1_NUM<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment">#添加</span>
        bullet1<span class="token punctuation">.</span>append<span class="token punctuation">(</span>Bullet1<span class="token punctuation">(</span>OurPlane<span class="token punctuation">(</span>bg_size<span class="token punctuation">)</span><span class="token punctuation">.</span>rect<span class="token punctuation">.</span>midtop<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment"># 二级子弹</span>
    bullet2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    bullet2_index <span class="token operator">=</span> <span class="token number">0</span>
    BULLET2_NUM <span class="token operator">=</span> <span class="token number">40</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>BULLET2_NUM <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        bullet2<span class="token punctuation">.</span>append<span class="token punctuation">(</span>Bullet2<span class="token punctuation">(</span><span class="token punctuation">(</span>ourplane<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>centerx <span class="token operator">-</span> <span class="token number">33</span><span class="token punctuation">,</span> ourplane<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>centery<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        bullet2<span class="token punctuation">.</span>append<span class="token punctuation">(</span>Bullet2<span class="token punctuation">(</span><span class="token punctuation">(</span>ourplane<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>centerx <span class="token operator">+</span> <span class="token number">30</span><span class="token punctuation">,</span> ourplane<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>centery<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment">#设定子弹道具出现时间</span>
    bullet_tool <span class="token operator">=</span>Bullet_Tool<span class="token punctuation">(</span>bg_size<span class="token punctuation">)</span>
    <span class="token comment"># USEREVENT</span>
    tool_time<span class="token operator">=</span>pygame<span class="token punctuation">.</span>USEREVENT
    <span class="token comment">#在事件队列上重复创建事件,只用于插入到pygame的事列中</span>
    pygame<span class="token punctuation">.</span>time<span class="token punctuation">.</span>set_timer<span class="token punctuation">(</span>tool_time<span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span>
    <span class="token comment"># 标志是否使用正常子弹</span>
    is_bullet1 <span class="token operator">=</span> <span class="token boolean">True</span>
    <span class="token comment"># 子弹</span>
    bullet_time <span class="token operator">=</span> pygame<span class="token punctuation">.</span>USEREVENT <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token comment"># 子弹2</span>
    is_bullet2 <span class="token operator">=</span> <span class="token boolean">False</span>
    <span class="token comment"># # 标志是否暂停游戏</span>
    <span class="token comment"># 设定开始</span>
    start_game <span class="token operator">=</span> <span class="token boolean">False</span>
    <span class="token comment">#设定暂停</span>
    pause <span class="token operator">=</span> <span class="token boolean">False</span>
    game_resume_pressed_image <span class="token operator">=</span> pygame<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">&quot;../image/game_resume_pressed.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>convert_alpha<span class="token punctuation">(</span><span class="token punctuation">)</span>
    game_pause_pressed_image <span class="token operator">=</span> pygame<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">&quot;../image/game_pause_pressed.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>convert_alpha<span class="token punctuation">(</span><span class="token punctuation">)</span>
    game_resume_nor_image <span class="token operator">=</span> pygame<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">&quot;../image/game_resume_nor.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>convert_alpha<span class="token punctuation">(</span><span class="token punctuation">)</span>
    game_paused_nor_image <span class="token operator">=</span> pygame<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">&quot;../image/game_pause_nor.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>convert_alpha<span class="token punctuation">(</span><span class="token punctuation">)</span>
    paused_rect <span class="token operator">=</span> game_paused_nor_image<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">#暂停的位置</span>
    paused_rect<span class="token punctuation">.</span>left<span class="token punctuation">,</span> paused_rect<span class="token punctuation">.</span>top <span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span>
    paused_image <span class="token operator">=</span> game_paused_nor_image
    <span class="token comment"># 游戏暂停画面</span>
    continues_image <span class="token operator">=</span> pygame<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">&quot;../image/game_resume_nor.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>convert_alpha<span class="token punctuation">(</span><span class="token punctuation">)</span>
    continues_rect <span class="token operator">=</span> continues_image<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>
    continues_rect<span class="token punctuation">.</span>left<span class="token punctuation">,</span> continues_rect<span class="token punctuation">.</span>top <span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">(</span>bg_size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> continues_rect<span class="token punctuation">.</span>width<span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>bg_size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">-</span> continues_rect<span class="token punctuation">.</span>height<span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token comment">#结束</span>
    again_image <span class="token operator">=</span> pygame<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">&quot;../image/btn_finish.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>convert_alpha<span class="token punctuation">(</span><span class="token punctuation">)</span>
    again_rect <span class="token operator">=</span> again_image<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>
    over_image<span class="token operator">=</span>pygame<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">&quot;../image/gameover.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>convert_alpha<span class="token punctuation">(</span><span class="token punctuation">)</span>
    over_rect<span class="token operator">=</span>over_image<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># 游戏开始画面</span>
    logo_image <span class="token operator">=</span> pygame<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">&quot;../image/bg1.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>convert_alpha<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">#logo的图片位置</span>
    logo_rect <span class="token operator">=</span> logo_image<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>
    logo_rect<span class="token punctuation">.</span>left<span class="token punctuation">,</span> logo_rect<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span>bg_size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> logo_rect<span class="token punctuation">.</span>width<span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>bg_size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> logo_rect<span class="token punctuation">.</span>height<span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">)</span>
    begin_image <span class="token operator">=</span> pygame<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">&quot;../image/game_resume_nor.png&quot;</span><span class="token punctuation">)</span>
    <span class="token comment">#开始图片位置</span>
    begin_image_rect <span class="token operator">=</span> begin_image<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>
    begin_image_rect<span class="token punctuation">.</span>left<span class="token punctuation">,</span> begin_image_rect<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>bg_size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> begin_image_rect<span class="token punctuation">.</span>width<span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>logo_rect<span class="token punctuation">.</span>bottom <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment">#life</span>
    life_image<span class="token operator">=</span>pygame<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">&quot;../image/life.png&quot;</span><span class="token punctuation">)</span>
    life_rect<span class="token operator">=</span>life_image<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>
    life_num<span class="token operator">=</span><span class="token number">3</span>
    <span class="token keyword">while</span> running<span class="token punctuation">:</span>
        <span class="token comment">#绘制背景图片</span>
        <span class="token comment"># screen.blit(background,(0,0))</span>
        <span class="token comment"># 绘制移动背景</span>
        <span class="token keyword">for</span> each <span class="token keyword">in</span> background1<span class="token punctuation">:</span>
            screen<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>each<span class="token punctuation">.</span>image<span class="token punctuation">,</span> each<span class="token punctuation">.</span>rect<span class="token punctuation">)</span>
            each<span class="token punctuation">.</span>move<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> each<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>height <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
                <span class="token keyword">for</span> each <span class="token keyword">in</span> background2<span class="token punctuation">:</span>
                    screen<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>each<span class="token punctuation">.</span>image<span class="token punctuation">,</span> each<span class="token punctuation">.</span>rect<span class="token punctuation">)</span>
                    each<span class="token punctuation">.</span>move<span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment"># 绘制开始界面</span>
        <span class="token comment">#游戏没开始的时候</span>
        <span class="token keyword">if</span>  <span class="token keyword">not</span> start_game<span class="token punctuation">:</span>
            screen<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>logo_image<span class="token punctuation">,</span>logo_rect<span class="token punctuation">)</span>
            screen<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>begin_image<span class="token punctuation">,</span>begin_image_rect<span class="token punctuation">)</span>

            <span class="token comment"># 判断按下鼠标哪个键</span>
            <span class="token keyword">if</span> pygame<span class="token punctuation">.</span>mouse<span class="token punctuation">.</span>get_pressed<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                <span class="token comment"># 获取鼠标坐标</span>
                pos <span class="token operator">=</span> pygame<span class="token punctuation">.</span>mouse<span class="token punctuation">.</span>get_pos<span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token comment"># 如果用户点击重新开始</span>
                <span class="token keyword">if</span> begin_image_rect<span class="token punctuation">.</span>left <span class="token operator">&lt;</span> pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> begin_image_rect<span class="token punctuation">.</span>right <span class="token keyword">and</span> begin_image_rect<span class="token punctuation">.</span>top <span class="token operator">&lt;</span> pos<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> begin_image_rect<span class="token punctuation">.</span>bottom<span class="token punctuation">:</span>
                    start_game <span class="token operator">=</span> <span class="token boolean">True</span>
        <span class="token keyword">elif</span> life_num <span class="token keyword">and</span> <span class="token keyword">not</span> pause <span class="token keyword">and</span> start_game<span class="token punctuation">:</span>
            key_pressed <span class="token operator">=</span> pygame<span class="token punctuation">.</span>key<span class="token punctuation">.</span>get_pressed<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> key_pressed<span class="token punctuation">[</span>pygame<span class="token punctuation">.</span>K_w<span class="token punctuation">]</span> <span class="token keyword">or</span> key_pressed<span class="token punctuation">[</span>pygame<span class="token punctuation">.</span>K_UP<span class="token punctuation">]</span><span class="token punctuation">:</span>
                ourplane<span class="token punctuation">.</span>moveUp<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> key_pressed<span class="token punctuation">[</span>pygame<span class="token punctuation">.</span>K_s<span class="token punctuation">]</span> <span class="token keyword">or</span> key_pressed<span class="token punctuation">[</span>pygame<span class="token punctuation">.</span>K_DOWN<span class="token punctuation">]</span><span class="token punctuation">:</span>
                ourplane<span class="token punctuation">.</span>moveDown<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> key_pressed<span class="token punctuation">[</span>pygame<span class="token punctuation">.</span>K_a<span class="token punctuation">]</span> <span class="token keyword">or</span> key_pressed<span class="token punctuation">[</span>pygame<span class="token punctuation">.</span>K_LEFT<span class="token punctuation">]</span><span class="token punctuation">:</span>
                ourplane<span class="token punctuation">.</span>moveLeft<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> key_pressed<span class="token punctuation">[</span>pygame<span class="token punctuation">.</span>K_d<span class="token punctuation">]</span> <span class="token keyword">or</span> key_pressed<span class="token punctuation">[</span>pygame<span class="token punctuation">.</span>K_RIGHT<span class="token punctuation">]</span><span class="token punctuation">:</span>
                ourplane<span class="token punctuation">.</span>moveRight<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> key_pressed<span class="token punctuation">[</span>pygame<span class="token punctuation">.</span>K_SPACE<span class="token punctuation">]</span> <span class="token keyword">or</span> key_pressed<span class="token punctuation">[</span>pygame<span class="token punctuation">.</span>K_0<span class="token punctuation">]</span><span class="token punctuation">:</span>
                ourplane<span class="token punctuation">.</span>planeShoot<span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token comment"># 绘制检测是否获得</span>
            <span class="token keyword">if</span> bullet_tool<span class="token punctuation">.</span>active<span class="token punctuation">:</span>
                bullet_tool<span class="token punctuation">.</span>move<span class="token punctuation">(</span><span class="token punctuation">)</span>
                screen<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>bullet_tool<span class="token punctuation">.</span>image<span class="token punctuation">,</span>bullet_tool<span class="token punctuation">.</span>rect<span class="token punctuation">)</span>
                <span class="token comment"># pygame.sprite.collide_mask(bullet_tool, OurPlane(bg_size))</span>
                <span class="token comment"># butt=pygame.sprite.spritecollide(ourplane,bullet_tool,False,pygame.sprite.collide_mask)</span>
                <span class="token keyword">if</span> pygame<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>collide_mask<span class="token punctuation">(</span>bullet_tool<span class="token punctuation">,</span> OurPlane<span class="token punctuation">(</span>bg_size<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                    is_bullet2 <span class="token operator">=</span> <span class="token boolean">True</span>
                    pygame<span class="token punctuation">.</span>time<span class="token punctuation">.</span>set_timer<span class="token punctuation">(</span>bullet_time<span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span>
                    bullet_tool<span class="token punctuation">.</span>active <span class="token operator">=</span> <span class="token boolean">False</span>

            <span class="token comment"># 绘制暂停按钮</span>
            screen<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>paused_image<span class="token punctuation">,</span> paused_rect<span class="token punctuation">)</span>

            <span class="token keyword">for</span> each <span class="token keyword">in</span> small_enemies<span class="token punctuation">:</span>
                <span class="token keyword">if</span> each<span class="token punctuation">.</span>active<span class="token punctuation">:</span>
                    <span class="token comment"># 敌机下落</span>
                    each<span class="token punctuation">.</span>move<span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token comment"># 绘制敌机</span>
                    screen<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>each<span class="token punctuation">.</span>image<span class="token punctuation">,</span>each<span class="token punctuation">.</span>rect<span class="token punctuation">)</span>
                    pygame<span class="token punctuation">.</span>draw<span class="token punctuation">.</span>line<span class="token punctuation">(</span>screen<span class="token punctuation">,</span>color_black<span class="token punctuation">,</span><span class="token punctuation">(</span>each<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>left<span class="token punctuation">,</span>each<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top<span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span>each<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>right<span class="token punctuation">,</span>each<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top <span class="token operator">-</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    energy_remain <span class="token operator">=</span> each<span class="token punctuation">.</span>energy <span class="token operator">/</span> OurEnemy<span class="token punctuation">.</span>energy
                    <span class="token keyword">if</span> energy_remain <span class="token operator">&gt;</span> <span class="token number">0.2</span><span class="token punctuation">:</span>
                        energy_color <span class="token operator">=</span> color_green
                    <span class="token keyword">else</span><span class="token punctuation">:</span>
                        energy_color <span class="token operator">=</span> color_red
                        <span class="token comment">#绘制</span>
                    pygame<span class="token punctuation">.</span>draw<span class="token punctuation">.</span>line<span class="token punctuation">(</span>screen<span class="token punctuation">,</span>energy_color<span class="token punctuation">,</span><span class="token punctuation">(</span>each<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>left<span class="token punctuation">,</span>each<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top <span class="token operator">-</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                     <span class="token punctuation">(</span>each<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>left <span class="token operator">+</span> each<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>width <span class="token operator">*</span> energy_remain<span class="token punctuation">,</span> each<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top <span class="token operator">-</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">2</span> <span class="token punctuation">)</span>
                <span class="token keyword">else</span><span class="token punctuation">:</span>
                    <span class="token keyword">if</span> el_destroy_index<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">:</span>
                        <span class="token keyword">pass</span>
                    <span class="token comment">#实现爆炸效果</span>
                    <span class="token keyword">if</span> <span class="token keyword">not</span> <span class="token punctuation">(</span>delay <span class="token operator">%</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                        screen<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>each<span class="token punctuation">.</span>destroy_images<span class="token punctuation">[</span>me_destroy_index<span class="token punctuation">]</span><span class="token punctuation">,</span> each<span class="token punctuation">.</span>rect<span class="token punctuation">)</span>
                        el_destroy_index <span class="token operator">=</span> <span class="token punctuation">(</span>el_destroy_index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">4</span>
                        <span class="token keyword">if</span> el_destroy_index <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
                            each<span class="token punctuation">.</span>reset<span class="token punctuation">(</span><span class="token punctuation">)</span>

            <span class="token keyword">for</span> each <span class="token keyword">in</span> middle_enemies<span class="token punctuation">:</span>
                <span class="token keyword">if</span> each<span class="token punctuation">.</span>active<span class="token punctuation">:</span>
                    each<span class="token punctuation">.</span>move<span class="token punctuation">(</span><span class="token punctuation">)</span>
                    screen<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>each<span class="token punctuation">.</span>image<span class="token punctuation">,</span>each<span class="token punctuation">.</span>rect<span class="token punctuation">)</span>
                    pygame<span class="token punctuation">.</span>draw<span class="token punctuation">.</span>line<span class="token punctuation">(</span>screen<span class="token punctuation">,</span>color_black<span class="token punctuation">,</span><span class="token punctuation">(</span>each<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>left<span class="token punctuation">,</span>each<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top<span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

                                     <span class="token punctuation">(</span>each<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>right<span class="token punctuation">,</span>each<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top <span class="token operator">-</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    energy_remain <span class="token operator">=</span> each<span class="token punctuation">.</span>energy <span class="token operator">/</span> Midenemy<span class="token punctuation">.</span>energy
                    <span class="token keyword">if</span> energy_remain <span class="token operator">&gt;</span> <span class="token number">0.2</span><span class="token punctuation">:</span>
                        energy_color <span class="token operator">=</span> color_green
                    <span class="token keyword">else</span><span class="token punctuation">:</span>
                        energy_color <span class="token operator">=</span> color_red
                    pygame<span class="token punctuation">.</span>draw<span class="token punctuation">.</span>line<span class="token punctuation">(</span>screen<span class="token punctuation">,</span>energy_color<span class="token punctuation">,</span><span class="token punctuation">(</span>each<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>left<span class="token punctuation">,</span>each<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top <span class="token operator">-</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                     <span class="token punctuation">(</span>each<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>left <span class="token operator">+</span> each<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>width <span class="token operator">*</span> energy_remain<span class="token punctuation">,</span> each<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top <span class="token operator">-</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">2</span> <span class="token punctuation">)</span>
                <span class="token keyword">else</span><span class="token punctuation">:</span>

                    <span class="token keyword">if</span> el_destroy_index <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
                        <span class="token keyword">pass</span>
                    <span class="token comment"># 实现爆炸效果</span>
                    <span class="token keyword">if</span> <span class="token keyword">not</span> <span class="token punctuation">(</span>delay <span class="token operator">%</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                        screen<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>each<span class="token punctuation">.</span>destroy_images<span class="token punctuation">[</span>me_destroy_index<span class="token punctuation">]</span><span class="token punctuation">,</span> each<span class="token punctuation">.</span>rect<span class="token punctuation">)</span>
                        el_destroy_index <span class="token operator">=</span> <span class="token punctuation">(</span>el_destroy_index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">4</span>
                        <span class="token keyword">if</span> el_destroy_index <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
                            each<span class="token punctuation">.</span>reset<span class="token punctuation">(</span><span class="token punctuation">)</span>

            <span class="token comment">#飞机True的时候</span>
            <span class="token keyword">if</span> ourplane<span class="token punctuation">.</span>active<span class="token punctuation">:</span>
                <span class="token keyword">if</span> switch_image<span class="token punctuation">:</span>
                    screen<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>ourplane<span class="token punctuation">.</span>image_one<span class="token punctuation">,</span>ourplane<span class="token punctuation">.</span>rect<span class="token punctuation">)</span>

                <span class="token keyword">else</span><span class="token punctuation">:</span>
                    screen<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>ourplane<span class="token punctuation">.</span>image_two<span class="token punctuation">,</span>ourplane<span class="token punctuation">.</span>rect<span class="token punctuation">)</span>
                <span class="token comment">#子弹一，小子弹</span>
                <span class="token keyword">if</span> <span class="token keyword">not</span> <span class="token punctuation">(</span>delay <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                    <span class="token keyword">if</span> is_bullet1<span class="token punctuation">:</span>
                        bullets <span class="token operator">=</span> bullet1
                        bullets<span class="token punctuation">[</span>bullet1_index<span class="token punctuation">]</span><span class="token punctuation">.</span>reset<span class="token punctuation">(</span>ourplane<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>midtop<span class="token punctuation">)</span>
                        bullet1_index <span class="token operator">=</span> <span class="token punctuation">(</span>bullet1_index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> BULLET1_NUM
                        <span class="token comment">#子弹移动</span>
                        <span class="token keyword">for</span> b <span class="token keyword">in</span> bullets<span class="token punctuation">:</span>
                            <span class="token keyword">if</span> b<span class="token punctuation">.</span>active<span class="token punctuation">:</span>
                                b<span class="token punctuation">.</span>move<span class="token punctuation">(</span><span class="token punctuation">)</span>
                                screen<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>b<span class="token punctuation">.</span>image<span class="token punctuation">,</span>b<span class="token punctuation">.</span>rect<span class="token punctuation">)</span>
                                <span class="token comment">#子弹和敌机碰撞效果</span>
                                enemies_hit<span class="token operator">=</span>pygame<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>spritecollide<span class="token punctuation">(</span>b<span class="token punctuation">,</span>enemies<span class="token punctuation">,</span><span class="token boolean">False</span><span class="token punctuation">,</span>pygame<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>collide_mask<span class="token punctuation">)</span>
                                <span class="token keyword">if</span> enemies_hit<span class="token punctuation">:</span>
                                    b<span class="token punctuation">.</span>active<span class="token operator">=</span><span class="token boolean">False</span>
                                    <span class="token keyword">for</span> e <span class="token keyword">in</span> enemies_hit<span class="token punctuation">:</span>
                                        <span class="token comment"># 子弹造成伤害</span>
                                        <span class="token keyword">if</span> e <span class="token keyword">in</span> small_enemies <span class="token keyword">or</span> e <span class="token keyword">in</span> middle_enemies <span class="token punctuation">:</span>
                                            e<span class="token punctuation">.</span>energy <span class="token operator">-=</span> <span class="token number">1</span>
                                            <span class="token comment"># 敌机死亡</span>
                                            <span class="token keyword">if</span> e<span class="token punctuation">.</span>energy <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
                                                e<span class="token punctuation">.</span>active <span class="token operator">=</span> <span class="token boolean">False</span>
                                        <span class="token keyword">else</span><span class="token punctuation">:</span>
                                            e<span class="token punctuation">.</span>active <span class="token operator">=</span> <span class="token boolean">False</span>

                    <span class="token keyword">if</span> is_bullet2<span class="token punctuation">:</span>
                        bullets <span class="token operator">=</span> bullet2
                        bullets<span class="token punctuation">[</span>bullet2_index<span class="token punctuation">]</span><span class="token punctuation">.</span>reset<span class="token punctuation">(</span><span class="token punctuation">(</span>ourplane<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>centerx <span class="token operator">-</span> <span class="token number">33</span><span class="token punctuation">,</span> ourplane<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>centery<span class="token punctuation">)</span><span class="token punctuation">)</span>
                        bullets<span class="token punctuation">[</span>bullet2_index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>reset<span class="token punctuation">(</span><span class="token punctuation">(</span>ourplane<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>centerx <span class="token operator">+</span> <span class="token number">33</span><span class="token punctuation">,</span> ourplane<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>centery<span class="token punctuation">)</span><span class="token punctuation">)</span>
                        bullet2_index <span class="token operator">=</span> <span class="token punctuation">(</span>bullet2_index <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">%</span> BULLET2_NUM
                    <span class="token comment">#升级后：</span>
                        <span class="token keyword">for</span> b <span class="token keyword">in</span> bullets<span class="token punctuation">:</span>
                            <span class="token keyword">if</span> b<span class="token punctuation">.</span>active<span class="token punctuation">:</span>
                                b<span class="token punctuation">.</span>move<span class="token punctuation">(</span><span class="token punctuation">)</span>
                                screen<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>b<span class="token punctuation">.</span>image<span class="token punctuation">,</span> b<span class="token punctuation">.</span>rect<span class="token punctuation">)</span>
                                <span class="token comment"># 子弹和敌机碰撞效果</span>
                                enemies_hit <span class="token operator">=</span> pygame<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>spritecollide<span class="token punctuation">(</span>b<span class="token punctuation">,</span> enemies<span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">,</span> pygame<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>collide_mask<span class="token punctuation">)</span>
                                <span class="token keyword">if</span> enemies_hit<span class="token punctuation">:</span>
                                    b<span class="token punctuation">.</span>active <span class="token operator">=</span> <span class="token boolean">False</span>
                                    <span class="token keyword">for</span> e <span class="token keyword">in</span> enemies_hit<span class="token punctuation">:</span>
                                        <span class="token comment">#子弹造成伤害</span>
                                        <span class="token keyword">if</span> e <span class="token keyword">in</span> small_enemies <span class="token keyword">or</span> e <span class="token keyword">in</span> middle_enemies<span class="token punctuation">:</span>
                                            e<span class="token punctuation">.</span>energy <span class="token operator">-=</span> <span class="token number">2</span>
                                            <span class="token comment"># 敌机死亡</span>
                                            <span class="token keyword">if</span> e<span class="token punctuation">.</span>energy <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
                                                e<span class="token punctuation">.</span>active <span class="token operator">=</span> <span class="token boolean">False</span>
                                        <span class="token keyword">else</span><span class="token punctuation">:</span>
                                            e<span class="token punctuation">.</span>active <span class="token operator">=</span> <span class="token boolean">False</span>

            <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token comment">#绘制损毁的英雄机</span>
                <span class="token comment"># pass</span>
                <span class="token keyword">if</span> <span class="token keyword">not</span> <span class="token punctuation">(</span>delay<span class="token operator">%</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                    screen<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>ourplane<span class="token punctuation">.</span>destroy_images<span class="token punctuation">[</span>me_destroy_index<span class="token punctuation">]</span><span class="token punctuation">,</span>ourplane<span class="token punctuation">.</span>rect<span class="token punctuation">)</span>
                    me_destroy_index<span class="token operator">=</span><span class="token punctuation">(</span>me_destroy_index<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span><span class="token number">4</span>
                    <span class="token keyword">if</span> me_destroy_index <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
                        ourplane<span class="token punctuation">.</span>reset<span class="token punctuation">(</span><span class="token punctuation">)</span>
                        life_num<span class="token operator">-=</span><span class="token number">1</span>
        <span class="token comment">#实现英雄机与敌机的碰撞</span>
        <span class="token comment"># for e in enemies:</span>
        <span class="token comment">#     flag=ourplane.checkHit(e)</span>
        <span class="token comment">#     if flag:</span>
        <span class="token comment">#         ourplane.active=False</span>
        <span class="token comment">#         e.active=False</span>
        <span class="token comment">#碰撞检测</span>
        <span class="token comment">#飞机和敌机的碰撞事件</span>
            enemies_down<span class="token operator">=</span>pygame<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>spritecollide<span class="token punctuation">(</span>ourplane<span class="token punctuation">,</span>enemies<span class="token punctuation">,</span><span class="token boolean">False</span><span class="token punctuation">,</span>pygame<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>collide_mask<span class="token punctuation">)</span>
            <span class="token keyword">if</span> enemies_down<span class="token punctuation">:</span>
                ourplane<span class="token punctuation">.</span>active<span class="token operator">=</span><span class="token boolean">False</span>
                <span class="token keyword">for</span> e <span class="token keyword">in</span> enemies_down<span class="token punctuation">:</span>
                    e<span class="token punctuation">.</span>active<span class="token operator">=</span><span class="token boolean">False</span>
                    is_bullet2<span class="token operator">=</span><span class="token boolean">False</span>
            <span class="token keyword">if</span> life_num<span class="token punctuation">:</span>
                <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>life_num<span class="token punctuation">)</span><span class="token punctuation">:</span>
                        screen<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>life_image<span class="token punctuation">,</span> <span class="token punctuation">(</span>bg_size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">-</span> <span class="token number">10</span> <span class="token operator">-</span> <span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> life_rect<span class="token punctuation">.</span>width<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

        <span class="token comment">#第三模块：</span>
        <span class="token comment"># 绘制暂停游戏界面</span>
        <span class="token keyword">elif</span> pause<span class="token punctuation">:</span>
            screen<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>continues_image<span class="token punctuation">,</span> continues_rect<span class="token punctuation">)</span>
            pygame<span class="token punctuation">.</span>mixer<span class="token punctuation">.</span>music<span class="token punctuation">.</span>stop<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token comment"># 检测用户的鼠标操作</span>
            <span class="token comment">#鼠标事件</span>
            <span class="token comment"># pygame.mouse.get_pressed()</span>
            <span class="token comment"># 用户按下鼠标</span>
            <span class="token keyword">if</span> pygame<span class="token punctuation">.</span>mouse<span class="token punctuation">.</span>get_pressed<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
              <span class="token comment"># 获取鼠标坐标</span>
                pos <span class="token operator">=</span> pygame<span class="token punctuation">.</span>mouse<span class="token punctuation">.</span>get_pos<span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token comment"># 点击继续游戏</span>
                <span class="token keyword">if</span> continues_rect<span class="token punctuation">.</span>left <span class="token operator">&lt;</span> pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> continues_rect<span class="token punctuation">.</span>right <span class="token keyword">and</span> continues_rect<span class="token punctuation">.</span>top <span class="token operator">&lt;</span> pos<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> continues_rect<span class="token punctuation">.</span>bottom<span class="token punctuation">:</span>
                    pause <span class="token operator">=</span> <span class="token keyword">not</span> pause
                    pygame<span class="token punctuation">.</span>mixer<span class="token punctuation">.</span>music<span class="token punctuation">.</span>play<span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token comment">#插入掉落tool事件</span>
                    pygame<span class="token punctuation">.</span>time<span class="token punctuation">.</span>set_timer<span class="token punctuation">(</span>tool_time<span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span>

        <span class="token comment">#生命</span>
        <span class="token keyword">elif</span> life_num<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">:</span>
            pygame<span class="token punctuation">.</span>mixer<span class="token punctuation">.</span>music<span class="token punctuation">.</span>stop<span class="token punctuation">(</span><span class="token punctuation">)</span>
            again_rect<span class="token punctuation">.</span>left<span class="token punctuation">,</span> again_rect<span class="token punctuation">.</span>top <span class="token operator">=</span>  <span class="token punctuation">(</span>bg_size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> again_rect<span class="token punctuation">.</span>width<span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">,</span><span class="token number">300</span>
            screen<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>again_image<span class="token punctuation">,</span> again_rect<span class="token punctuation">)</span>
            over_rect<span class="token punctuation">.</span>left<span class="token punctuation">,</span> over_rect<span class="token punctuation">.</span>top <span class="token operator">=</span><span class="token punctuation">(</span>bg_size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">-</span> again_rect<span class="token punctuation">.</span>width<span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">,</span> again_rect<span class="token punctuation">.</span>bottom <span class="token operator">+</span> <span class="token number">10</span>
            screen<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>over_image<span class="token punctuation">,</span> over_rect<span class="token punctuation">)</span>
            <span class="token comment"># 检测用户的鼠标操作</span>
            <span class="token comment"># 如果用户按下鼠标左键</span>
            <span class="token keyword">if</span> pygame<span class="token punctuation">.</span>mouse<span class="token punctuation">.</span>get_pressed<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                <span class="token comment"># 获取鼠标坐标</span>
                pos <span class="token operator">=</span> pygame<span class="token punctuation">.</span>mouse<span class="token punctuation">.</span>get_pos<span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token comment"># 如果用户点击重新开始</span>
                <span class="token keyword">if</span> again_rect<span class="token punctuation">.</span>left <span class="token operator">&lt;</span> pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> again_rect<span class="token punctuation">.</span>right <span class="token keyword">and</span> \
                                        again_rect<span class="token punctuation">.</span>top <span class="token operator">&lt;</span> pos<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> again_rect<span class="token punctuation">.</span>bottom<span class="token punctuation">:</span>
                    <span class="token comment"># 调用main函数，重新开始游戏</span>
                    main<span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token comment"># 如果用户点击结束游戏</span>
                <span class="token keyword">elif</span> over_rect<span class="token punctuation">.</span>left <span class="token operator">&lt;</span> pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> over_rect<span class="token punctuation">.</span>right <span class="token keyword">and</span>  over_rect<span class="token punctuation">.</span>top <span class="token operator">&lt;</span> pos<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> over_rect<span class="token punctuation">.</span>bottom<span class="token punctuation">:</span>
                    <span class="token comment"># 退出游戏</span>
                    pygame<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span>
                    sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token comment">#退出事件</span>
        <span class="token keyword">for</span> event <span class="token keyword">in</span> pygame<span class="token punctuation">.</span>event<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> event<span class="token punctuation">.</span><span class="token builtin">type</span> <span class="token operator">==</span> pygame<span class="token punctuation">.</span>QUIT<span class="token punctuation">:</span>
                sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token comment">#鼠标事件</span>
            <span class="token keyword">elif</span> event<span class="token punctuation">.</span><span class="token builtin">type</span> <span class="token operator">==</span> pygame<span class="token punctuation">.</span>MOUSEBUTTONDOWN<span class="token punctuation">:</span>
                <span class="token keyword">if</span> event<span class="token punctuation">.</span>button <span class="token operator">==</span> <span class="token number">1</span> <span class="token keyword">and</span> paused_rect<span class="token punctuation">.</span>collidepoint<span class="token punctuation">(</span>event<span class="token punctuation">.</span>pos<span class="token punctuation">)</span><span class="token punctuation">:</span>
                    pause <span class="token operator">=</span> <span class="token keyword">not</span> pause
                    <span class="token keyword">if</span> pause<span class="token punctuation">:</span>
                        pygame<span class="token punctuation">.</span>time<span class="token punctuation">.</span>set_timer<span class="token punctuation">(</span>tool_time<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
                    <span class="token keyword">else</span><span class="token punctuation">:</span>
                        pygame<span class="token punctuation">.</span>time<span class="token punctuation">.</span>set_timer<span class="token punctuation">(</span>tool_time<span class="token punctuation">,</span><span class="token number">10000</span><span class="token punctuation">)</span>

            <span class="token keyword">elif</span> event<span class="token punctuation">.</span><span class="token builtin">type</span> <span class="token operator">==</span>pygame<span class="token punctuation">.</span>MOUSEMOTION<span class="token punctuation">:</span>
                <span class="token keyword">if</span> paused_rect<span class="token punctuation">.</span>collidepoint<span class="token punctuation">(</span>event<span class="token punctuation">.</span>pos<span class="token punctuation">)</span><span class="token punctuation">:</span>
                    <span class="token keyword">if</span> pause<span class="token punctuation">:</span>
                        paused_image <span class="token operator">=</span> game_resume_pressed_image
                    <span class="token keyword">else</span><span class="token punctuation">:</span>
                        paused_image <span class="token operator">=</span> game_pause_pressed_image
                <span class="token keyword">else</span><span class="token punctuation">:</span>
                    <span class="token keyword">if</span> pause<span class="token punctuation">:</span>
                        paused_image <span class="token operator">=</span> game_resume_nor_image
                    <span class="token keyword">else</span><span class="token punctuation">:</span>
                        paused_image <span class="token operator">=</span> game_paused_nor_image
            <span class="token keyword">elif</span> event<span class="token punctuation">.</span><span class="token builtin">type</span> <span class="token operator">==</span> pygame<span class="token punctuation">.</span>KEYDOWN<span class="token punctuation">:</span>
                <span class="token keyword">if</span> event<span class="token punctuation">.</span>key <span class="token operator">==</span> pygame<span class="token punctuation">.</span>K_SPACE<span class="token punctuation">:</span>
                    <span class="token keyword">for</span> each <span class="token keyword">in</span> enemies<span class="token punctuation">:</span>
                        <span class="token keyword">if</span> each<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>bottom <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
                             each<span class="token punctuation">.</span>active <span class="token operator">=</span> <span class="token boolean">False</span>
            <span class="token keyword">elif</span> event<span class="token punctuation">.</span><span class="token builtin">type</span> <span class="token operator">==</span> tool_time<span class="token punctuation">:</span>
                <span class="token keyword">if</span> random<span class="token punctuation">.</span>choice<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">:</span>
                      bullet_tool<span class="token punctuation">.</span>reset<span class="token punctuation">(</span><span class="token punctuation">)</span>

                      <span class="token comment"># 2.2 设置动画效果的帧数，（图片切换的时间差）</span>
        clock <span class="token operator">=</span> pygame<span class="token punctuation">.</span>time<span class="token punctuation">.</span>Clock<span class="token punctuation">(</span><span class="token punctuation">)</span>
        clock<span class="token punctuation">.</span>tick<span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span>

        <span class="token keyword">if</span> <span class="token keyword">not</span> delay <span class="token operator">%</span> <span class="token number">3</span><span class="token punctuation">:</span>
            switch_image <span class="token operator">=</span> <span class="token keyword">not</span> switch_image

        <span class="token keyword">if</span> delay <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
            delay <span class="token operator">=</span> <span class="token number">60</span>
        delay <span class="token operator">-=</span> <span class="token number">1</span>
        <span class="token comment">#键盘事件监听，通过键盘控制飞机移动方法</span>

        <span class="token comment">#图片更新</span>
        pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>flip<span class="token punctuation">(</span><span class="token punctuation">)</span>
        pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment"># time.sleep(0.001)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    <span class="token string">&quot;程序的入口，执行此方法，调用自定义main方法&quot;</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">5/8/2024, 3:01:19 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/python/pygame/坦克大战.html" class="prev">
        Python-Pygame实现坦克大战
      </a></span> <span class="next"><a href="/python/基本语法.html">
        Python基本语法
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.6de842d1.js" defer></script><script src="/assets/js/2.57da4f88.js" defer></script><script src="/assets/js/1.a76cc220.js" defer></script><script src="/assets/js/63.2f626ca9.js" defer></script>
  </body>
</html>
